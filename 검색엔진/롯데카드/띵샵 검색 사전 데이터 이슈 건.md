어제 띵샵 사전 데이터 반영 이후 검색 결과 속도 저하 및 품질 저하 이슈와 관련하여 아래와 같이 확인된 사항과 개선 방향을 공유드립니다.

---

## 1. 이슈 원인 분석

현재 띵샵 검색 인덱스는 사용자 정의 사전을 **settings 내에 직접 입력**하는 방식(`user_dictionary_rules`)으로 구성되어 있습니다. 어제 반영된 약 60,000건 규모의 사전 데이터가 settings에 직접 포함되면서 다음과 같은 문제가 발생한 것으로 파악됩니다.

- **클러스터 상태 크기 증가**: 대용량 설정으로 인해 클러스터 상태가 커졌고, 검색 요청 시 설정을 참조하는 데 소요되는 시간이 증가했습니다.

## 2. 개선 방향 제안

보다 안정적인 운영과 성능 유지를 위해, 사용자 정의 사전 반영 방식을 다음과 같이 변경하고자 합니다.

### **외부 사전 파일 방식으로 전환**

- 사전을 `$ES_HOME/config/userdict.txt` 형태의 외부 파일로 관리하고, 인덱스 설정에서는 해당 파일 경로만 참조하도록 변경합니다.
    
- 이 방식은 클러스터 상태에 영향을 주지 않으며, 설정 변경 시 인덱스 재생성 없이 사전만 교체하여 적용할 수 있어 운영 측면에서도 유연합니다.