다음은 **대량 사용자 사전 적용 여부에 따른 OpenSearch 쿼리 성능 비교 보고서**입니다. 

첫 번 테스트는 대량 사용자 사전이 적용된 인덱스이며,
두 번째 테스트는 사전이 미적용된 인덱스입니다.

# 대량 사전 적용 여부에 따른 쿼리 성능 비교 보고서

- **대상 인덱스**: `osstem-stg-goods-ko`
    
- **총 요청 수**: 병렬 5,000회 / 순차 200회
    
- **최대 동시 실행 수**: 20
    
- **비교 목적**: 동일 쿼리에 대해 대량 사용자 사전 적용 여부에 따른 성능 차이 분석
    

---

## 테스트 시나리오 개요

| 항목      | 첫 번째 테스트   | 두 번째 테스트           |
| ------- | ---------- | ------------------ |
| 사용자 사전  | 대량 사전 포함   | 사전 미포함 또는 간소화      |
| Query 1 | 상품 검색 쿼리   | 동일                 |
| Query 2 | 전체 검색 쿼리   | 동일                 |

---

## 병렬 테스트 (5,000회 요청) 성능 비교

| 항목                      | Query | 대량 사전 포함 | 사전 미포함 | 개선 효과    |
| ----------------------- | ----- | -------- | ------ | -------- |
| 총 실행 시간                 | Q1    | 24.45초   | 16.95초 | 30.7% 감소 |
|                         | Q2    | 16.15초   | 13.57초 | 16.0% 감소 |
| 초당 요청 수 (RPS)           | Q1    | 204.51   | 295.04 | 44.3% 증가 |
|                         | Q2    | 309.64   | 368.46 | 19.0% 증가 |
| OpenSearch took 평균 (ms) | Q1    | 42.21    | 21.23  | 49.7% 감소 |
|                         | Q2    | 5.32     | 5.83   | 9.6% 증가  |
| 전체 응답 시간 평균 (ms)        | Q1    | 96.97    | 67.00  | 30.9% 감소 |
|                         | Q2    | 64.09    | 53.80  | 16.0% 감소 |
| Query Profile 평균 (ms)   | Q1    | 12.97    | 8.96   | 30.9% 감소 |
|                         | Q2    | 2.13     | 1.86   | 12.7% 감소 |

---

## 순차 테스트 (200회 요청) 성능 비교

| 항목                      | Query | 대량 사전 포함 | 사전 미포함 | 개선 효과    |
| ----------------------- | ----- | -------- | ------ | -------- |
| 총 실행 시간                 | Q1    | 6.70초    | 5.71초  | 14.8% 감소 |
|                         | Q2    | 8.74초    | 4.09초  | 53.2% 감소 |
| OpenSearch took 평균 (ms) | Q1    | 8.24     | 7.10   | 13.8% 감소 |
|                         | Q2    | 1.18     | 1.31   | 11.0% 증가 |
| 전체 응답 시간 평균 (ms)        | Q1    | 31.89    | 27.09  | 15.1% 감소 |
|                         | Q2    | 42.98    | 19.86  | 53.8% 감소 |
| Query Profile 평균 (ms)   | Q1    | 3.63     | 3.03   | 16.5% 감소 |
|                         | Q2    | 1.12     | 1.15   | 2.6% 증가  |

