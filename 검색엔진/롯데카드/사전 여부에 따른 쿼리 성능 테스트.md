다음은 **대량 사용자 사전 적용 여부에 따른 OpenSearch 쿼리 성능 비교 보고서**입니다. 

## 1. Settings에 사전 적용

첫 번 테스트는 대량 사용자 사전이 적용된 인덱스이며,
두 번째 테스트는 사전이 미적용된 인덱스입니다.

- **대상 인덱스**: `osstem-stg-goods-ko`
    
- **총 요청 수**: 병렬 5,000회 / 순차 200회
    
- **최대 동시 실행 수**: 20
    
- **비교 목적**: 동일 쿼리에 대해 대량 사용자 사전 적용 여부에 따른 성능 차이 분석
    

---

### 테스트 시나리오 개요

| 항목      | 첫 번째 테스트 | 두 번째 테스트      |
| ------- | -------- | ------------- |
| 사용자 사전  | 대량 사전 포함 | 사전 미포함 또는 간소화 |
| Query 1 | 상품 검색 쿼리 | 동일            |
| Query 2 | 전체 검색 쿼리 | 동일            |

---

### 병렬 테스트 (5,000회 요청) 성능 비교

| 항목                      | Query | 대량 사전 포함 | 사전 미포함 |
| ----------------------- | ----- | -------- | ------ |
| 총 실행 시간                 | Q1    | 24.45초   | 16.95초 |
|                         | Q2    | 16.15초   | 13.57초 |
| 초당 요청 수 (RPS)           | Q1    | 204.51   | 295.04 |
|                         | Q2    | 309.64   | 368.46 |
| OpenSearch took 평균 (ms) | Q1    | 42.21    | 21.23  |
|                         | Q2    | 5.32     | 5.83   |
| 전체 응답 시간 평균 (ms)        | Q1    | 96.97    | 67.00  |
|                         | Q2    | 64.09    | 53.80  |
| Query Profile 평균 (ms)   | Q1    | 12.97    | 8.96   |
|                         | Q2    | 2.13     | 1.86   |

## 두 사전 추가 방식의 시간 차이 비교 표 (5,000회 요청 기준)

| 항목                          | Query | settings 방식 | .txt 방식 | 시간 차이 (ms) |
| --------------------------- | ----- | ----------- | ------- | ---------- |
| **총 실행 시간 (초)**             | Q1    | 16.95       | 13.12   | 3.83초      |
|                             | Q2    | 13.57       | 11.46   | 2.11초      |
| **OpenSearch took 평균 (ms)** | Q1    | 21.23       | 4.03    | 17.20      |
|                             | Q2    | 5.83        | 1.61    | 4.22       |
| **전체 응답 시간 평균 (ms)**        | Q1    | 67.00       | 51.91   | 15.09      |
|                             | Q2    | 53.80       | 45.47   | 8.33       |
| **Query Profile 평균 (ms)**   | Q1    | 8.96        | 0.86    | 8.10       |
|                             | Q2    | 1.86        | 1.35    | 0.51       |

---

### 🧩 요약

- `.txt` 방식은 대부분의 항목에서 **15~90%**에 달하는 시간 단축 효과를 보였습니다.
    
- 특히 **Query Profile 평균 시간**과 **OpenSearch took**에서는 **압도적인 성능 개선**을 보여줬습니다.